<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Minesweeper</title>
    <link rel="icon" type="image/png" sizes="32x32" href="Image/logo.png">
    <link rel="stylesheet" href="style_ui.css" />
    <link rel="stylesheet" href="style_board.css" />
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
</head>
<!-- Body -->
<body>
<!-- Sidebar -->
<div class="sidebar">
    <div class="sidebar-content">
        <div class="sidebar-header">
            <span id="control-panel-title">Control Panel</span>
            <div class="collapse-handle" onclick="toggle_sidebar()">◀</div>
        </div>

        <div class="controls">
            <div class="sidebar-button">
                <div id="information-btn" class="button selected" onclick="toggle_information()">Information</div>
                <div id="information-list" class="sidebar-button info-list" style="display: block">
                    <div class="info-line">
                        <span class="info-label">Status</span>
                        <span id="status-info" class="info-value"></span>
                    </div>
                    <div class="info-line">
                        <span class="info-label">Time</span>
                        <span id="time-info" class="info-value"></span>
                    </div>
                    <div class="info-line">
                        <span class="info-label">Size</span>
                        <span id="size-info" class="info-value"></span>
                    </div>
                    <div class="info-line">
                        <span class="info-label">Marks</span>
                        <span id="marks-info" class="info-value"></span>
                    </div>
                    <div class="info-line">
                        <span class="info-label">Density</span>
                        <span id="density-info" class="info-value"></span>
                    </div>
                    <div class="info-line">
                        <span class="info-label">Solvability</span>
                        <span id="solvability-info" class="info-value"></span>
                    </div>
                </div>
            </div>

            <div class="sidebar-button">
                <div id="start-btn" class="button" onclick="start()">Restart</div>
            </div>

            <div class="sidebar-button dropdown">
                <div id="difficulty-btn" class="button" onclick="toggle_difficulty_dropdown()">Difficulty</div>
                <div id="difficulty-menu" class="dropdown-menu" style="display: none">
                    <div class="option-row">
                        <div class="option" onclick="set_difficulty('low')">Low</div>
                        <div class="option" onclick="set_difficulty('medium')">Medium</div>
                    </div>
                    <div class="option-row">
                        <div class="option" onclick="set_difficulty('high')">High</div>
                        <div class="option" onclick="set_difficulty('fullscreen')">Fullscreen</div>
                    </div>
                </div>
            </div>

            <div class="sidebar-button dropdown">
                <div id="background-btn" class="button" onclick="toggle_background_dropdown()">Background</div>
                <div id="background-menu" class="dropdown-menu" style="display: none">
                    <div class="option-row" >
                        <div class="option" onclick="set_background('default.jpg')">Default</div>
                        <div class="option" onclick="set_background('01.jpg', 'light')">01</div>
                    </div>
                    <div class="option-row" >
                        <div class="option" onclick="set_background('02.jpg')">02</div>
                        <div class="option" onclick="set_background('03.jpg')">03</div>
                    </div>
                    <div class="option-row" >
                        <div class="option" onclick="set_background('04.jpg')">04</div>
                        <div class="option" onclick="set_background('05.jpg')">05</div>
                    </div>
                </div>
            </div>

            <div class="sidebar-button">
                <div id="mark-btn" class="button" onclick="auto_mark()">Auto Mark</div>
            </div>

            <div class="sidebar-button">
                <div id="hint-btn" class="button" onclick="send_hint()">Hint</div>
            </div>

            <div class="sidebar-button">
                <div id="solve-btn" class="button" onclick="solve()">Solve</div>
            </div>

            <div class="sidebar-button">
                <div id="solve-all-btn" class="button" onclick="solve_all()">Solve All</div>
            </div>

            <div class="sidebar-button">
                <div id="analyse-test-btn" class="button" onclick="calculate_and_visualize_solutions()">Analyse</div>
            </div>

            <div class="sidebar-button">
                <div id="continue-test-btn" class="button" onclick="continue_solving_test()">Continue</div>
            </div>

            <div class="sidebar-button">
                <div id="complete-test-btn" class="button" onclick="complete_full_test()">Complete</div>
            </div>

            <div class="sidebar-button">
                <div id="screenshot-btn" class="button" onclick="screenshot_data()">Screenshot</div>
            </div>

            <div class="sidebar-button">
                <div id="guide-btn" class="button" onclick="open_guide()">Guide</div>
            </div>

            <div class="sidebar-button">
                <div id="answer-btn" class="button" onclick="toggle_mines_visibility()">Answer</div>
            </div>

            <div class="sidebar-button">
                <div id="solving-test-btn" class="button" onclick="solving_test()">Solving Test</div>
            </div>

            <div class="sidebar-button">
                <div id="reset-test-btn" class="button" onclick="reset_test()">Reset Test</div>
            </div>

            <div class="sidebar-button">
                <div id="exit-btn" class="button" onclick="exit_test()">Exit Test</div>
            </div>

        </div>
    </div>
</div>

<div class="expand-button" onclick="toggle_sidebar()">▶</div>

<!-- Main Content -->
<div class="main-content">
    <div class="header">
        <div class="title-container" id="title-dark">
            <img src="Image/minesweeper_title_dark.png" class="title-img" alt="title" id="title-img-dark" onclick="start()">
        </div>
        <div class="title-container" id="title-light" style="display: none;">
            <img src="Image/minesweeper_title_light.png" class="title-img" alt="title" id="title-img-light" onclick="start()">
        </div>
    </div>

    <div id="board-wrapper" class="board-wrapper">
        <div id="board" class="board"></div>
        <div id="border" class="border"></div>
        <div id="border-outline" class="border-outline"></div>
    </div>

    <div class="main-test-container-a" id="main-test-container-a" style="display: none">
        <div style="flex: 1; text-align: left;">
            <h2>Solving Algorithm Completeness Test</h2>
            <p>
                Validates the module-based solving algorithm's completeness by comparing its solutions against a mathematically
                complete SAT solver. Light yellow, yellow, and orange represent solutions identified by the MDL algorithm,
                SAT algorithm, and their convergence, respectively.
            </p>
        </div>
        <div id="test-container-a" class="test-container">

            <div class="test-module-a">
                <h3>Controls</h3>
                <div id="test-controls-a" class="test-ctrl-a">
                    <div id="rst-test-btn" class="test-option ctrl-a" onclick="start()">Rst</div>
                    <div id="ans-test-btn-a" class="test-option ctrl-a" onclick="toggle_mines_visibility()">Ans</div>
                    <div id="esc-test-btn-a" class="test-option ctrl-a" onclick="exit_test()">Esc</div>
                </div>
            </div>

        </div>
    </div>

    <div class="main-test-container-b" id="main-test-container-b" style="display: none">
        <div style="flex: 1; text-align: left;">
            <h2>Reset Algorithm Validation Test</h2>
            <p>
                Validates the module-based reset algorithm's reliability through targeted test cases. Each scenario evaluates
                the algorithm's ability to dynamically redistribute mines while preserving game state consistency and logical
                constraints. The validation focuses on edge cases and complex configurations to ensure robust performance.
            </p>
        </div>
        <div id="test-container-b" class="test-container">
            <!-- test-options loaded in scrip_main.js -->

            <div class="test-module-b">
                <h3>Test Type 1</h3>
                <div id="test-options-1" class="test-option-list"></div>
            </div>

            <div class="test-module-b">
                <h3>Test Type 2</h3>
                <div id="test-options-2" class="test-option-list"></div>
            </div>

            <div class="test-module-b">
                <h3>Test Type 3</h3>
                <div id="test-options-3" class="test-option-list"></div>
            </div>

            <div class="test-module-b">
                <h3>Test Type 4</h3>
                <div id="test-options-4" class="test-option-list"></div>
            </div>

            <div class="test-module-b">
                <h3>Test Type 5</h3>
                <div id="test-options-5" class="test-option-list"></div>
            </div>

            <div class="test-module-b">
                <h3>Controls</h3>
                <div id="test-controls-b" class="test-ctrl-b">
                    <div id="ans-test-btn-b" class="test-option ctrl-b" onclick="toggle_mines_visibility()">Ans</div>
                    <div id="esc-test-btn-b" class="test-option ctrl-b" onclick="exit_test()">Esc</div>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- Script - Part 1 -->
<script src="libs/html2canvas.min.js"></script>
<script src="script_main.js"></script>
<!-- Modal -->
<div id="guide-modal" class="modal" onclick="close_guide(event)">
    <div id="guide-content" class="modal-content">
        <span class="close-button" onclick="close_guide_with_button()">×</span>
        <div style="display: flex; flex-direction: row; gap: 30px;">
            <div style="flex: 1; text-align: left;">
                <h2>游戏说明</h2>
                <p>
                    欢迎来到扫雷 :D<br><br>
                    请使用桌面端的 Microsoft-Edge, FireFox, Google-Chrome 浏览器打开此页面，上述浏览器经过桌面端测试没有不兼
                    容状况。移动端页面暂未完成，也别期待，因为我不会做。<br>
                    玩家可左键点击屏幕中心区域的方格打开无雷区域，可通过右键点击方格标记为雷，标记后再次左键或者右键点击可取消标记。<br>
                    控制面板位于侧边栏中，可以打开和收起。<br>
                    玩家可通过侧边栏的按钮完成此游戏的重设，修改难度，以及修改背景。<br>
                    此游戏使用算法实时在信息面板中会更新当前游戏是否有确定解。当棋盘规模大于480时，为避免卡顿算法会自动关闭。<br>
                    点击 Solve 按钮可以自动求解一步，点击 Solve All 可以自动求解至游戏结束，再次点击可停止。<br>
                    在无解情况下，玩家可点击一个不一定是雷的方格，算法可以在无解并且玩家触雷时重新排布雷的位置，确保当玩家实力足够时
                    不会因为运气差而失败。<br>
                    最后如果您对此游戏有什么建议例如游戏模式和背景，或者发现了问题，可以通过下面的邮箱与我联系。<br>
                </p>
            </div>

            <div style="flex: 1; text-align: left;">
                <h2>Game Guide</h2>
                <p>
                    Welcome to Minesweeper :D<br><br>
                    Please use a desktop browser like Microsoft Edge, Firefox, or Google Chrome to open this page.
                    These browsers have been tested on desktop with no compatibility issues. A mobile version isn’t available,
                    and don’t expect it because I have no idea how to make one.<br>
                    Left-click the grid area in the center of the screen to open safe tiles. Right-click a tile to mark
                    it as a mine. Clicking again (left or right) will remove the flag.<br>
                    The control panel is located in the sidebar, which you can expand or collapse.<br>
                    Use the buttons in the sidebar to restart the game, change difficulty, or switch backgrounds.<br>
                    The algorithm updates in real time if the game has a certain solution. If the board is larger than 480,
                    it will turn off automatically to avoid lag.<br>
                    Click "Solve" to solve one step automatically. Click "Solve All" to solve until the game ends.
                    Click again to stop.<br>
                    When there is no certain solution, click a tile that may not be a mine. If you hit a mine, the algorithm
                    will rearrange the mines. This ensures skilled players won’t lose because of bad luck.<br>
                    Finally if you have any suggestions or encounter issues, feel free to contact me at the email below.<br>
                </p>
            </div>
        </div>

        <p onclick="copy_to_clipboard('wangyiwy2003@gmail.com')" style="text-align: center; margin-top: 10px; margin-bottom: 0; font-size: 14px; color: rgba(50, 50, 50, 1);
         cursor: pointer">
            wangyiwy2003@gmail.com
        </p>
    </div>
</div>
<!-- Notice -->
<div id="notice-container" class="notice-container"></div>
</body>
</html>